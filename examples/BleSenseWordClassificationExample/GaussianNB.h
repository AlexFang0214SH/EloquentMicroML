#pragma once
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
            public:
                /**
                * Predict class for features vector
                */
                int predict(float *x) {
                    float votes[4] = { 0.0f };
                    float theta[64] = { 0 };
                    float sigma[64] = { 0 };
                    theta[0] = 1.426077569891; theta[1] = 1.739255389161; theta[2] = 2.010489750494; theta[3] = 2.223003270713; theta[4] = 2.348833644527; theta[5] = 2.47466401834; theta[6] = 2.499830093103; theta[7] = 2.446701713049; theta[8] = 2.379592180348; theta[9] = 2.323667569764; theta[10] = 2.155893738012; theta[11] = 1.839919688212; theta[12] = 1.398115264599; theta[13] = 1.031809065274; theta[14] = 0.785740778705; theta[15] = 0.573227258486; theta[16] = 0.405453426734; theta[17] = 0.285215513978; theta[18] = 0.20971728969; theta[19] = 0.178958753869; theta[20] = 0.215309750748; theta[21] = 0.17336629281; theta[22] = 0.229290903394; theta[23] = 0.223698442336; theta[24] = 0.232087133923; theta[25] = 0.206921059161; theta[26] = 0.150996448577; theta[27] = 0.164977601223; theta[28] = 0.111849221168; theta[29] = 0.120237912756; theta[30] = 0.067109532701; theta[31] = 0.053128380055; theta[32] = 0.072701993759; theta[33] = 0.055924610584; theta[34] = 0.086683146405; theta[35] = 0.114645451697; theta[36] = 0.095071837993; theta[37] = 0.148200218048; theta[38] = 0.150996448577; theta[39] = 0.153792679106; theta[40] = 0.187347445456; theta[41] = 0.212513520219; theta[42] = 0.156588909635; theta[43] = 0.218105981277; theta[44] = 0.215309750748; theta[45] = 0.170570062281; theta[46] = 0.192939906515; theta[47] = 0.178958753869; theta[48] = 0.167773831752; theta[49] = 0.164977601223; theta[50] = 0.148200218048; theta[51] = 0.212513520219; theta[52] = 0.13981152646; theta[53] = 0.159385140164; theta[54] = 0.089479376934; theta[55] = 0.120237912756; theta[56] = 0.075498224288; theta[57] = 0.123034143285; theta[58] = 0.10346052958; theta[59] = 0.123034143285; theta[60] = 0.100664299051; theta[61] = 0.10346052958; theta[62] = 0.058720841113; theta[63] = 0.078294454818;
                    sigma[0] = 0.18962410693; sigma[1] = 0.274130834033; sigma[2] = 0.329418312507; sigma[3] = 0.34812113368; sigma[4] = 0.262527578757; sigma[5] = 0.255044886507; sigma[6] = 0.212705514999; sigma[7] = 0.217013731749; sigma[8] = 0.206317469473; sigma[9] = 0.306274353197; sigma[10] = 0.304773123404; sigma[11] = 0.402673635068; sigma[12] = 0.351350341516; sigma[13] = 0.291637362714; sigma[14] = 0.247601288783; sigma[15] = 0.165784265059; sigma[16] = 0.070080865749; sigma[17] = 0.049822082447; sigma[18] = 0.039430757473; sigma[19] = 0.013385984343; sigma[20] = 0.035552580507; sigma[21] = 0.021361267619; sigma[22] = 0.017983500585; sigma[23] = 0.019953864688; sigma[24] = 0.023730395886; sigma[25] = 0.020798306447; sigma[26] = 0.012291337619; sigma[27] = 0.022229166093; sigma[28] = 0.010758832205; sigma[29] = 0.009468712852; sigma[30] = 0.007881475102; sigma[31] = 0.007216868162; sigma[32] = 0.010852659067; sigma[33] = 0.007944026343; sigma[34] = 0.015473632024; sigma[35] = 0.010219327749; sigma[36] = 0.011227966516; sigma[37] = 0.014535363404; sigma[38] = 0.013792567412; sigma[39] = 0.010969942645; sigma[40] = 0.014723017128; sigma[41] = 0.019203249792; sigma[42] = 0.017702019999; sigma[43] = 0.025990059481; sigma[44] = 0.026920509197; sigma[45] = 0.013221787335; sigma[46] = 0.022166614852; sigma[47] = 0.022581016826; sigma[48] = 0.017639468757; sigma[49] = 0.011908211266; sigma[50] = 0.013784748507; sigma[51] = 0.025771130136; sigma[52] = 0.012729196309; sigma[53] = 0.015035773335; sigma[54] = 0.010008217309; sigma[55] = 0.016036593197; sigma[56] = 0.010344430231; sigma[57] = 0.01188475455; sigma[58] = 0.007779829335; sigma[59] = 0.011697100826; sigma[60] = 0.012572818205; sigma[61] = 0.014910670852; sigma[62] = 0.008843200438; sigma[63] = 0.009632909861;
                    votes[0] = 0.151898734177 - gauss(x, theta, sigma);
                    theta[0] = 2.077909975475; theta[1] = 3.027385586279; theta[2] = 3.622671996717; theta[3] = 3.768075984235; theta[4] = 3.622671996717; theta[5] = 3.401459092629; theta[6] = 3.085795735111; theta[7] = 2.488023786424; theta[8] = 2.087852128468; theta[9] = 2.151233353797; theta[10] = 2.440798559709; theta[11] = 1.544762021242; theta[12] = 0.791643932044; theta[13] = 0.673580865256; theta[14] = 0.663638712263; theta[15] = 0.512020879124; theta[16] = 0.351703662117; theta[17] = 0.227426749708; theta[18] = 0.181444292117; theta[19] = 0.116820297664; theta[20] = 0.101907068175; theta[21] = 0.120548605037; theta[22] = 0.305721204526; theta[23] = 0.722048861095; theta[24] = 0.948232841679; theta[25] = 1.420485108833; theta[26] = 1.585773402336; theta[27] = 1.422970647081; theta[28] = 1.053868217227; theta[29] = 0.904735922336; theta[30] = 0.804071623285; theta[31] = 0.669852557884; theta[32] = 0.70837840073; theta[33] = 0.700921785986; theta[34] = 0.553032260219; theta[35] = 0.562974413212; theta[36] = 0.448639653796; theta[37] = 0.27962305292; theta[38] = 0.25228213219; theta[39] = 0.223698442336; theta[40] = 0.186415368613; theta[41] = 0.212513520219; theta[42] = 0.25849597781; theta[43] = 0.284594129416; theta[44] = 0.316906126642; theta[45] = 0.393957812336; theta[46] = 0.354189200365; theta[47] = 0.385258428467; theta[48] = 0.380287351971; theta[49] = 0.359160276861; theta[50] = 0.413842118321; theta[51] = 0.408871041825; theta[52] = 0.431240886059; theta[53] = 0.402657196205; theta[54] = 0.402657196205; theta[55] = 0.377801813723; theta[56] = 0.355431969489; theta[57] = 0.345489816497; theta[58] = 0.297021820657; theta[59] = 0.321877203139; theta[60] = 0.308206742774; theta[61] = 0.299507358905; theta[62] = 0.267195361679; theta[63] = 0.238611671825;
                    sigma[0] = 0.467043109754; sigma[1] = 0.943050334275; sigma[2] = 1.537799893111; sigma[3] = 1.910216084008; sigma[4] = 1.71644623849; sigma[5] = 1.320677584145; sigma[6] = 1.105278909386; sigma[7] = 0.705553309846; sigma[8] = 0.846638020896; sigma[9] = 2.43685738007; sigma[10] = 2.943877664514; sigma[11] = 2.28657995325; sigma[12] = 1.38815879003; sigma[13] = 1.034507971547; sigma[14] = 0.82912367331; sigma[15] = 0.446081493754; sigma[16] = 0.251069890259; sigma[17] = 0.115038701723; sigma[18] = 0.178250978443; sigma[19] = 0.028804479225; sigma[20] = 0.024810466627; sigma[21] = 0.033132098443; sigma[22] = 0.948805048482; sigma[23] = 2.623680176606; sigma[24] = 2.661062651825; sigma[25] = 3.424888988346; sigma[26] = 2.403184734031; sigma[27] = 1.878143514169; sigma[28] = 1.081324100651; sigma[29] = 0.62355094911; sigma[30] = 0.36233696511; sigma[31] = 0.227559890351; sigma[32] = 0.321207593309; sigma[33] = 0.451230773723; sigma[34] = 0.267750221294; sigma[35] = 0.215537696206; sigma[36] = 0.062980624144; sigma[37] = 0.068139170964; sigma[38] = 0.058829075087; sigma[39] = 0.047538962136; sigma[40] = 0.04823397593; sigma[41] = 0.035028713861; sigma[42] = 0.047773722351; sigma[43] = 0.04114792419; sigma[44] = 0.033054874688; sigma[45] = 0.04533654065; sigma[46] = 0.045231516343; sigma[47] = 0.062582149569; sigma[48] = 0.058964988895; sigma[49] = 0.060534175592; sigma[50] = 0.051959249861; sigma[51] = 0.034781597845; sigma[52] = 0.054436587914; sigma[53] = 0.050791626688; sigma[54] = 0.060132612068; sigma[55] = 0.050841049891; sigma[56] = 0.050896650995; sigma[57] = 0.053611838213; sigma[58] = 0.040258306535; sigma[59] = 0.04147226396; sigma[60] = 0.043705574949; sigma[61] = 0.037941593891; sigma[62] = 0.029814565937; sigma[63] = 0.031720448205;
                    votes[1] = 0.341772151899 - gauss(x, theta, sigma);
                    theta[0] = 2.060969070047; theta[1] = 2.246403305141; theta[2] = 1.541753211783; theta[3] = 1.243292395298; theta[4] = 1.098477087891; theta[5] = 1.192077225606; theta[6] = 1.524092808441; theta[7] = 1.665376035179; theta[8] = 1.585904220139; theta[9] = 1.442854953066; theta[10] = 1.333360452344; theta[11] = 1.23976031463; theta[12] = 1.199141386943; theta[13] = 1.209737628948; theta[14] = 1.213269709616; theta[15] = 1.176182862598; theta[16] = 1.071986482878; theta[17] = 0.941299498145; theta[18] = 0.810612513412; theta[19] = 0.715246335363; theta[20] = 0.649902842997; theta[21] = 0.623412237983; theta[22] = 0.572197068291; theta[23] = 0.540408342275; theta[24] = 0.498023374253; theta[25] = 0.473298809574; theta[26] = 0.443276123892; theta[27] = 0.393826994533; theta[28] = 0.35497410718; theta[29] = 0.342611824841; theta[30] = 0.303758937488; theta[31] = 0.245479606458; theta[32] = 0.286098534145; theta[33] = 0.233117324118; theta[34] = 0.280800413143; theta[35] = 0.305524977822; theta[36] = 0.330249542501; theta[37] = 0.399125115536; theta[38] = 0.441510083558; theta[39] = 0.390294913865; theta[40] = 0.339079744172; theta[41] = 0.326717461833; theta[42] = 0.33378162317; theta[43] = 0.303758937488; theta[44] = 0.234883364453; theta[45] = 0.185434235094; theta[46] = 0.148347388075; theta[47] = 0.155411549412; theta[48] = 0.107728460388; theta[49] = 0.077705774706; theta[50] = 0.070641613369; theta[51] = 0.072407653703; theta[52] = 0.090068057046; theta[53] = 0.135985105736; theta[54] = 0.134219065402; theta[55] = 0.146581347741; theta[56] = 0.134219065402; theta[57] = 0.199562557768; theta[58] = 0.166007791418; theta[59] = 0.158943630081; theta[60] = 0.236649404787; theta[61] = 0.220755041779; theta[62] = 0.194264436765; theta[63] = 0.17130591242;
                    sigma[0] = 1.049989661558; sigma[1] = 2.190389933048; sigma[2] = 0.470099108291; sigma[3] = 0.135048322098; sigma[4] = 0.055092241123; sigma[5] = 0.077910102272; sigma[6] = 0.15873323702; sigma[7] = 0.128617153469; sigma[8] = 0.093255082706; sigma[9] = 0.091970096539; sigma[10] = 0.090055092884; sigma[11] = 0.087166992908; sigma[12] = 0.094440264121; sigma[13] = 0.102455833169; sigma[14] = 0.096742011186; sigma[15] = 0.085270702643; sigma[16] = 0.072352225213; sigma[17] = 0.064411509728; sigma[18] = 0.046845873589; sigma[19] = 0.036154289661; sigma[20] = 0.026454515444; sigma[21] = 0.023741073782; sigma[22] = 0.020441279209; sigma[23] = 0.021676363; sigma[24] = 0.024564462976; sigma[25] = 0.026535606804; sigma[26] = 0.024720407899; sigma[27] = 0.018470135381; sigma[28] = 0.021963301658; sigma[29] = 0.024127817191; sigma[30] = 0.020796833634; sigma[31] = 0.016243241879; sigma[32] = 0.033821353611; sigma[33] = 0.0303968031; sigma[34] = 0.048972962341; sigma[35] = 0.079513216082; sigma[36] = 0.099586446584; sigma[37] = 0.129172317396; sigma[38] = 0.130756717814; sigma[39] = 0.106809815422; sigma[40] = 0.05580958777; sigma[41] = 0.057344085813; sigma[42] = 0.05244117743; sigma[43] = 0.030752357525; sigma[44] = 0.033422134608; sigma[45] = 0.035125053169; sigma[46] = 0.022792928649; sigma[47] = 0.02763969686; sigma[48] = 0.020098200378; sigma[49] = 0.014228433472; sigma[50] = 0.008520849287; sigma[51] = 0.010223767847; sigma[52] = 0.010080298518; sigma[53] = 0.011907973017; sigma[54] = 0.014814786383; sigma[55] = 0.027758215001; sigma[56] = 0.022874020009; sigma[57] = 0.019493134076; sigma[58] = 0.023404232748; sigma[59] = 0.021551607061; sigma[60] = 0.026367186287; sigma[61] = 0.018526275553; sigma[62] = 0.023416708342; sigma[63] = 0.025113389105;
                    votes[2] = 0.240506329114 - gauss(x, theta, sigma);
                    theta[0] = 1.182406052347; theta[1] = 1.430072184933; theta[2] = 1.636194321085; theta[3] = 1.724075852003; theta[4] = 1.851903533338; theta[5] = 2.006894596956; theta[6] = 2.054829977457; theta[7] = 1.954165678405; theta[8] = 1.76402200242; theta[9] = 1.47001833535; theta[10] = 1.064165447112; theta[11] = 0.693465171241; theta[12] = 0.458581806789; theta[13] = 0.341939047571; theta[14] = 0.329156279437; theta[15] = 0.305188589187; theta[16] = 0.27482951487; theta[17] = 0.273231668853; theta[18] = 0.263644592753; theta[19] = 0.27482951487; theta[20] = 0.247666132586; theta[21] = 0.254057516653; theta[22] = 0.252459670636; theta[23] = 0.228491980386; theta[24] = 0.244470440553; theta[25] = 0.218904904286; theta[26] = 0.198132906069; theta[27] = 0.185350137935; theta[28] = 0.166175985735; theta[29] = 0.126229835318; theta[30] = 0.092675068968; theta[31] = 0.073500916767; theta[32] = 0.107055683118; theta[33] = 0.105457837101; theta[34] = 0.102262145068; theta[35] = 0.129425527351; theta[36] = 0.143806141502; theta[37] = 0.169371677769; theta[38] = 0.153393217602; theta[39] = 0.167773831752; theta[40] = 0.194937214036; theta[41] = 0.226894134369; theta[42] = 0.182154445902; theta[43] = 0.191741522002; theta[44] = 0.143806141502; theta[45] = 0.154991063618; theta[46] = 0.100664299051; theta[47] = 0.102262145068; theta[48] = 0.083087992868; theta[49] = 0.089479376934; theta[50] = 0.075098762784; theta[51] = 0.078294454818; theta[52] = 0.078294454818; theta[53] = 0.113447067185; theta[54] = 0.091077222951; theta[55] = 0.118240605235; theta[56] = 0.123034143285; theta[57] = 0.091077222951; theta[58] = 0.123034143285; theta[59] = 0.164578139719; theta[60] = 0.132621219385; theta[61] = 0.134219065402; theta[62] = 0.121436297268; theta[63] = 0.180556599885;
                    sigma[0] = 0.02197209964; sigma[1] = 0.046589204512; sigma[2] = 0.135636641118; sigma[3] = 0.162612821379; sigma[4] = 0.18235858876; sigma[5] = 0.255168233726; sigma[6] = 0.357818650497; sigma[7] = 0.406179695975; sigma[8] = 0.486245284941; sigma[9] = 0.511556836248; sigma[10] = 0.315380824611; sigma[11] = 0.178682107634; sigma[12] = 0.077563557999; sigma[13] = 0.034809146238; sigma[14] = 0.034701915538; sigma[15] = 0.017039487462; sigma[16] = 0.010038854652; sigma[17] = 0.016544183755; sigma[18] = 0.017080337253; sigma[19] = 0.024193306987; sigma[20] = 0.015813993754; sigma[21] = 0.011534978221; sigma[22] = 0.018295618514; sigma[23] = 0.011218392346; sigma[24] = 0.018566248374; sigma[25] = 0.010038854652; sigma[26] = 0.005565802615; sigma[27] = 0.007143625765; sigma[28] = 0.009380151783; sigma[29] = 0.006959801709; sigma[30] = 0.008032108704; sigma[31] = 0.00596408807; sigma[32] = 0.01250516074; sigma[33] = 0.016973106553; sigma[34] = 0.014098302562; sigma[35] = 0.019439412642; sigma[36] = 0.026930242936; sigma[37] = 0.0273949093; sigma[38] = 0.018719435088; sigma[39] = 0.019623236698; sigma[40] = 0.042529756602; sigma[41] = 0.032266246792; sigma[42] = 0.023223124467; sigma[43] = 0.029074856926; sigma[44] = 0.034221930502; sigma[45] = 0.023856296217; sigma[46] = 0.014583393821; sigma[47] = 0.008843998286; sigma[48] = 0.007143625765; sigma[49] = 0.011509447102; sigma[50] = 0.009962261295; sigma[51] = 0.00968652521; sigma[52] = 0.013975753191; sigma[53] = 0.015599532355; sigma[54] = 0.015563788788; sigma[55] = 0.020547463203; sigma[56] = 0.023626516146; sigma[57] = 0.016957787882; sigma[58] = 0.015584213683; sigma[59] = 0.023151637334; sigma[60] = 0.019888760335; sigma[61] = 0.016084623614; sigma[62] = 0.016779070049; sigma[63] = 0.024285219015;
                    votes[3] = 0.26582278481 - gauss(x, theta, sigma);
                    // return argmax of votes
                    uint8_t classIdx = 0;
                    float maxVotes = votes[0];

                    for (uint8_t i = 1; i < 4; i++) {
                        if (votes[i] > maxVotes) {
                            classIdx = i;
                            maxVotes = votes[i];
                        }
                    }

                    return classIdx;
                }

                /**
                * Convert class idx to readable name
                */
                const char* predictLabel(float *x) {
                    switch (predict(x)) {
                        case 0:
                            return "no";
                        case 1:
                            return "stop";
                        case 2:
                            return "play";
                        case 3:
                            return "yes";
                        default:
                            return "Houston we have a problem";
                    }
                }

            protected:
                /**
                * Compute gaussian value
                */
                float gauss(float *x, float *theta, float *sigma) {
                    float gauss = 0.0f;

                    for (uint16_t i = 0; i < 64; i++) {
                        gauss += log(sigma[i]);
                        gauss += abs(x[i] - theta[i]) / sigma[i];
                    }

                    return gauss;
                }
            };
        }
    }
}